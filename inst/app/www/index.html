<div>
  <div>
    <div id="app"></div>
  </div>
  <script>
    var excalidrawRef;
  const App = () => {

    excalidrawRef = React.useRef(null);
        return React.createElement(
          React.Fragment,
          null,
          React.createElement(
            "div",
            {
              style: { height: "100vh" },
            },
            React.createElement(ExcalidrawLib.Excalidraw, {
              ref: excalidrawRef,
              initialData: {{ initialData }},
              onChange: (elements, state) => {
                if ({{auto_save}}){
                  try {
                          Shiny.setInputValue("{{id_for_shiny}}",
                            ExcalidrawLib.serializeAsJSON(
                              element = excalidrawRef.current.getSceneElements(),
                              appState = excalidrawRef.current.getAppState(),
                              file = excalidrawRef.current.getFiles()
                            )
                          );
                  } catch {
                      console.log("Error auto saving")
                    }

              }
                }
                ,
            }),
          ),
        );
      };

      const excalidrawWrapper = document.getElementById("app");
      const root = ReactDOM.createRoot(excalidrawWrapper);
      root.render(React.createElement(App));
  </script>
</div>
